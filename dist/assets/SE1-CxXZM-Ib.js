import{S as G,P as R,W,o as B,p as F,q as H,m as O,M as A,B as V,V as X,G as j,u as L,a as v,A as q,D as _,v as T}from"./three.module-8Oc40bl9.js";import{C as N,a as J}from"./CSS2DRenderer-C93wpHdk.js";import{D as K,G as Q}from"./DRACOLoader-LEHEqbdo.js";const S=document.createElement("div");S.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:9999;transition:opacity 1.5s ease-out";document.body.appendChild(S);const u=new G,s=new R(75,window.innerWidth/window.innerHeight,.1,1e3),d=new W({antialias:!0});d.setSize(window.innerWidth,window.innerHeight);d.shadowMap.enabled=!0;document.body.appendChild(d.domElement);const D=new B;s.add(D);const i=new F(D),I=new H;I.load("sound/birds.mp3",e=>{i.setBuffer(e),i.setLoop(!0),i.setVolume(.5),i.play(),console.log("Bird sounds playing")},e=>console.log("Audio "+e.loaded/e.total*100+"% loaded"),e=>{console.error("Error loading audio:",e),U()});function U(){const e=["/sound/SE1.mp3"];let t=0;function a(){if(t>=e.length){console.error("Failed to load audio from all paths");return}const o=e[t];console.log(`Trying to load audio from: ${o}`),I.load(o,n=>{i.setBuffer(n),i.setLoop(!0),i.setVolume(.2),i.play(),console.log(`Successfully loaded audio from path: ${o}`)},n=>console.log("Audio "+n.loaded/n.total*100+"% loaded"),n=>{console.error(`Failed to load audio from path: ${o}`,n),t++,a()})}a()}const f=new N;f.setSize(window.innerWidth,window.innerHeight);f.domElement.style.cssText="position:absolute;top:0px;pointer-events:none";document.body.appendChild(f.domElement);s.position.set(0,5,0);s.lookAt(10,5,0);const c=20,y=18,k=.5,Y=new O,Z=new A({color:139,roughness:.7,metalness:.2});let p=Z,h;function ee(e){return new Promise((t,a)=>{Y.load(e,o=>{console.log(`Texture loaded successfully: ${e}`),o.wrapS=T,o.wrapT=T,o.repeat.set(1,1),t(o)},o=>console.log(`Texture ${e} loading: ${o.loaded/o.total*100}%`),o=>{console.error(`Error loading texture ${e}:`,o),a(o)})})}const oe=["/photos/SEimages/SEtexture.png"];async function te(){for(const e of oe)try{const t=await ee(e);p=new A({map:t,roughness:.7,metalness:.2}),console.log(`Successfully loaded texture from path: ${e}`),ae();break}catch{console.warn(`Failed to load texture from path: ${e}`)}}function ne(){const e=new j,t=new L(c,k,c),a=new v(t,p);a.position.y=-.5/2,a.receiveShadow=!0,e.add(a);const o=new L(c,y,k),n=new v(o,p);n.position.set(0,y/2,-20/2),n.receiveShadow=!0,n.castShadow=!0,n.userData={wallId:"front"},e.add(n);const w=n.clone();w.position.z=c/2,w.userData={wallId:"back"},e.add(w);const l=new L(k,y,c),r=new v(l,p);r.position.set(-20/2,y/2,0),r.receiveShadow=!0,r.castShadow=!0,r.userData={wallId:"left"},e.add(r);const g=r.clone();g.position.x=c/2,g.userData={wallId:"right"},e.add(g);const $=new q(16777215,.1);e.add($);const m=new _(16777215,.1);return m.position.set(0,15,0),m.castShadow=!0,m.shadow.mapSize.width=2048,m.shadow.mapSize.height=2048,e.add(m),{group:e,walls:{front:n,back:w,left:r,right:g}}}function ae(){h&&(h.group.children.forEach(e=>{e.isMesh&&(e.material=p)}),d.render(u,s))}function C(e,t){const a=document.createElement("div");a.className="wall-text",a.style.cssText="width:1000px;padding:25px;color:white;border-radius:10px;font-family:Arial,sans-serif;font-size:20px;pointer-events:auto;opacity:0;transition:opacity 2.5s ease-in-out",a.innerHTML=t,setTimeout(()=>{a.querySelectorAll("a").forEach(l=>{l.style.cssText="color:#FF0000;text-decoration:none;cursor:pointer",l.addEventListener("click",r=>{console.log(`Link clicked: ${l.getAttribute("href")}`),console.log(`Link text: ${l.textContent}`)})})},100);const o=new J(a);switch(e.userData.wallId){case"front":case"back":case"left":case"right":o.position.set(0,0,0);break}return e.add(o),setTimeout(()=>{a.style.opacity="1"},6e3),o}h=ne();u.add(h.group);te();C(h.walls.front,`
  <p>On the corner of South Pine and China Street is where it is. I <a href="SE3.html">remember</a> it well. 
  Velvet wine-colored trays lined with silver, gold, and pearls glint behind smudged 
  glass. When I push the door open, the bell clanks sharply and a surge of sweltering 
  summer air collides with the freezing blast of the air con. It smells faintly 
  of rubbing alcohol and lavender. That red-headed woman behind the counter is there again 
  and raises her eyebrows when she looks up from her book and sees me.</p>
`);C(h.walls.back,`
  <p>I picked up on how she's an eclectic collector, timesick for old world charm. 
  She's someone who keeps a heap of moth-eaten retro books surrounded by her newest 
  Denkirhiza gadgets. I've showered her with gifts from around town. This time, though, 
  I'm getting her something special - a compact mirror with one of my drawings engraved 
  on it. I pull the sketch from my pocket, unfold it, and slide it over to the red-headed 
  woman. The image sends a <a href="SE2.html">shiver</a> down my spine 
  if I linger on it too long.</p>
`);const M=new K;M.setDecoderPath("/draco/");const z=new Q;z.setDRACOLoader(M);z.load("/models/SEmodels/SE1_3.glb",e=>{const t=e.scene,o=new V().setFromObject(t).getCenter(new X);t.position.sub(o),t.scale.set(3,3,3),t.position.set(7,8,-6),t.rotation.y=-Math.PI/8,t.traverse(n=>{n.isMesh&&(n.castShadow=!0,n.receiveShadow=!0)}),u.add(t),d.render(u,s),console.log("SE1_3.glb model loaded successfully with DRACO compression")},e=>console.log(`SE1_3.glb loading: ${e.loaded/e.total*100}%`),e=>{console.error("Error loading DRACO GLB model:",e)});let b=!1,x=!1,E=0;const se=.01;document.addEventListener("keydown",e=>{e.key==="Alt"&&(b=!0)});document.addEventListener("keyup",e=>{e.key==="Alt"&&(b=!1,x=!1)});document.addEventListener("mousedown",e=>{b&&(x=!0,E=e.clientX)});document.addEventListener("mouseup",()=>{x=!1});document.addEventListener("mousemove",e=>{if(x&&b){const t=e.clientX-E;s.rotation.y+=t*se,E=e.clientX}});window.addEventListener("resize",()=>{s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight),f.setSize(window.innerWidth,window.innerHeight)});function P(){requestAnimationFrame(P),d.render(u,s),f.render(u,s)}function re(){P(),setTimeout(()=>{S.style.opacity="0",setTimeout(()=>{S.style.display="none"},5e3)},5e3)}re();
