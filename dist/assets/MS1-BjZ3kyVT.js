import{S as G,P as H,W as R,o as X,p as B,q as F,m as O,M as k,r as Y,s as q,a as S,t as j,G as N,u as v,A as _,D as V,v as I}from"./three.module-8Oc40bl9.js";import{C as J,a as K}from"./CSS2DRenderer-C93wpHdk.js";import{D as Q,G as U}from"./DRACOLoader-LEHEqbdo.js";const r=document.createElement("div");r.style.position="fixed";r.style.top="0";r.style.left="0";r.style.width="100%";r.style.height="100%";r.style.backgroundColor="#000";r.style.zIndex="9999";r.style.transition="opacity 1.5s ease-out";document.body.appendChild(r);const u=new G,d=new H(75,window.innerWidth/window.innerHeight,.1,1e3),m=new R({antialias:!0});m.setSize(window.innerWidth,window.innerHeight);m.shadowMap.enabled=!0;document.body.appendChild(m.domElement);let z=new X;d.add(z);const g=new B(z),Z=new F;Z.load("/sound/MS1whisper.mp3",function(e){g.setBuffer(e),g.setLoop(!0),g.setVolume(.5),g.play()},void 0,e=>{console.error("Error loading audio:",e)});const w=new J;w.setSize(window.innerWidth,window.innerHeight);w.domElement.style.position="absolute";w.domElement.style.top="0px";w.domElement.style.pointerEvents="none";document.body.appendChild(w.domElement);d.position.set(0,5,0);d.lookAt(0,5,-10);const c=20,M=18,x=.5,D=new O,$=new k({color:139,roughness:.7,metalness:.2});let p=$;function ee(e){return new Promise((n,o)=>{D.load(e,t=>{t.wrapS=I,t.wrapT=I,t.repeat.set(1,1),n(t)},void 0,t=>{o(t)})})}const te=["/photos/MSimages/MStexture.png"];async function oe(){for(const e of te)try{const n=await ee(e);p=new k({map:n,roughness:.7,metalness:.2}),ae();break}catch{continue}}let f;function ne(){const e=new N,n=new v(c,x,c),o=new S(n,p);o.position.y=-.5/2,o.receiveShadow=!0,e.add(o);const t=new v(c,M,x),a=new S(t,p);a.position.set(0,M/2,-20/2),a.receiveShadow=!0,a.castShadow=!0,a.userData={wallId:"front"},e.add(a);const s=a.clone();s.position.z=c/2,s.userData={wallId:"back"},e.add(s);const i=new v(x,M,c),l=new S(i,p);l.position.set(-20/2,M/2,0),l.receiveShadow=!0,l.castShadow=!0,l.userData={wallId:"left"},e.add(l);const y=l.clone();y.position.x=c/2,y.userData={wallId:"right"},e.add(y);const C=new _(16777215,.1);e.add(C);const h=new V(16777215,.1);return h.position.set(0,15,0),h.castShadow=!0,h.shadow.mapSize.width=2048,h.shadow.mapSize.height=2048,e.add(h),{group:e,walls:{front:a,back:s,left:l,right:y}}}function ae(){f&&(f.group.children.forEach(e=>{e.isMesh&&(e.material=p)}),m.render(u,d))}function se(e,n){const o=document.createElement("div");o.className="wall-text",o.style.width="1000px",o.style.padding="20px",o.style.color="white",o.style.borderRadius="10px",o.style.fontFamily="Arial, sans-serif",o.style.fontSize="18px",o.style.pointerEvents="auto",o.innerHTML=n,setTimeout(()=>{o.querySelectorAll("a").forEach(i=>{i.style.color="#0808fc",i.style.textDecoration="none",i.style.cursor="pointer"})},100);const t=new K(o);switch(e.userData.wallId){case"front":t.position.set(0,0,.1);break;case"back":t.position.set(0,0,-.1);break;case"left":t.position.set(.1,0,0),t.rotation.y=Math.PI/2;break;case"right":t.position.set(-.1,0,0),t.rotation.y=-Math.PI/2;break}return e.add(t),t}f=ne();u.add(f.group);D.load("/photos/MSimages/MS1.webp",e=>{const t=new Y({map:e,side:q,transparent:!0,opacity:.5}),a=new S(new j(15,10),t);a.position.set(c/2-x/2-.01,10/2+1,0),a.rotation.y=-Math.PI/2,u.add(a)});const A=new Q;A.setDecoderPath("/draco/");const P=new U;P.setDRACOLoader(A);const T=[];P.load("/models/MSmodels/MS1.glb",e=>{const n=e.scene;n.position.set(0,.4,0),n.scale.set(8,8,8),n.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),u.add(n)},void 0,e=>{console.error("Error loading MS1.glb:",e)});P.load("/models/MSmodels/MS1_2.glb",e=>{const n=e.scene;[{x:5.5,y:2.5,z:9,rotX:Math.PI/.58,rotY:Math.PI/1.3},{x:3,y:1.5,z:6,rotX:Math.PI/.56,rotY:Math.PI/1.02},{x:7,y:2.5,z:12,rotX:Math.PI/.54,rotY:Math.PI/3}].forEach((t,a)=>{const s=n.clone(!0);s.position.set(t.x,t.y,t.z),s.rotation.set(t.rotX,t.rotY,0),s.scale.set(9,9,9),s.traverse(i=>{i.isMesh&&(i.castShadow=!0,i.receiveShadow=!0)}),T.push(s),u.add(s)})},void 0,e=>{console.error("Error loading MS1_2.glb:",e)});oe();se(f.walls.front,`
  <p><a href="/pages/MS3.html">Nobody</a> can hear us from <a href="/pages/MS2.html">here</a>, Scarlett.</p>
`);let b=!1,L=!1,E=0,re=.01;document.addEventListener("keydown",e=>{e.key==="Alt"&&(b=!0)});document.addEventListener("keyup",e=>{e.key==="Alt"&&(b=!1,L=!1)});document.addEventListener("mousedown",e=>{b&&(L=!0,E=e.clientX)});document.addEventListener("mouseup",()=>{L=!1});document.addEventListener("mousemove",e=>{if(L&&b){const n=e.clientX-E;d.rotation.y+=n*re,E=e.clientX}});window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight),w.setSize(window.innerWidth,window.innerHeight)});function W(){requestAnimationFrame(W),T.forEach(e=>{e.rotation.x+=(Math.random()-.5)*.003,e.rotation.y+=(Math.random()-.5)*.003,e.position.x+=(Math.random()-.5)*.005,e.position.y+=(Math.random()-.5)*.005}),m.render(u,d),w.render(u,d)}function ie(){W(),setTimeout(()=>{r.style.opacity="0",setTimeout(()=>{r.style.display="none"},5e3)},5e3)}ie();
