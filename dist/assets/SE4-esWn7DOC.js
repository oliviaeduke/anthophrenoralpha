import{S as O,P as X,W as q,o as _,p as j,q as N,m as V,M as $,G as U,u as v,a as b,A as J,D as K,t as C,r as z,w as Q,v as T}from"./three.module-8Oc40bl9.js";import{C as Y,a as Z}from"./CSS2DRenderer-C93wpHdk.js";import{D as ee,G as te}from"./DRACOLoader-LEHEqbdo.js";const l=document.createElement("div");l.style.position="fixed";l.style.top="0";l.style.left="0";l.style.width="100%";l.style.height="100%";l.style.backgroundColor="#000";l.style.zIndex="9999";l.style.transition="opacity 1.5s ease-out";document.body.appendChild(l);const h=new O,c=new X(75,window.innerWidth/window.innerHeight,.1,1e3),y=new q({antialias:!0});y.setSize(window.innerWidth,window.innerHeight);y.shadowMap.enabled=!0;document.body.appendChild(y.domElement);const p=new Y;p.setSize(window.innerWidth,window.innerHeight);p.domElement.style.position="absolute";p.domElement.style.top="0px";p.domElement.style.pointerEvents="none";document.body.appendChild(p.domElement);const F=new _;c.add(F);const m=new j(F),G=new N;G.load("/sound/SE4.mp3",function(e){m.setBuffer(e),m.setLoop(!0),m.setVolume(.5),m.play(),console.log("urban noise is playing")},function(e){console.log("Audio "+e.loaded/e.total*100+"% loaded")},function(e){console.error("Error loading audio:",e),oe()});function oe(){const e=["/sound/SE4.mp3"];let t=0;function n(){if(t>=e.length){console.error("Failed to load audio from all paths");return}const o=e[t];console.log(`Trying to load audio from: ${o}`),G.load(o,function(a){m.setBuffer(a),m.setLoop(!0),m.setVolume(.2),m.play(),console.log(`Successfully loaded audio from path: ${o}`)},function(a){console.log("Audio "+a.loaded/a.total*100+"% loaded")},function(a){console.error(`Failed to load audio from path: ${o}`,a),t++,n()})}n()}c.position.set(0,5,0);c.lookAt(0,5,-10);const w=20,E=18,f=.5,A=new V,ne=new $({color:139,roughness:.7,metalness:.2});let L=ne;function ae(e){return new Promise((t,n)=>{A.load(e,o=>{console.log(`Texture loaded successfully: ${e}`),o.wrapS=T,o.wrapT=T,o.repeat.set(1,1),t(o)},o=>{console.log(`Texture ${e} loading: ${o.loaded/o.total*100}%`)},o=>{console.error(`Error loading texture ${e}:`,o),n(o)})})}const se=["/photos/SEimages/SEtexture.png"];async function ie(){for(const e of se)try{const t=await ae(e);L=new $({map:t,roughness:.7,metalness:.2}),console.log(`Successfully loaded texture from path: ${e}`),de();break}catch{console.warn(`Failed to load texture from path: ${e}`)}}function re(e,t,n){return new Promise((o,a)=>{A.load(e,s=>{const r=new C(t,n),i=new z({map:s,transparent:!0,opacity:.5,side:Q}),u=new b(r,i);u.castShadow=!1,u.receiveShadow=!1,o(u)},s=>{console.log(`Image loading: ${(s.loaded/s.total*100).toFixed(2)}%`)},s=>{console.error(`Error loading image ${e}:`,s),a(s)})})}let g;function le(){const e=new U,t=new v(w,f,w),n=new b(t,L);n.position.y=-.5/2,n.receiveShadow=!0,e.add(n);const o=new v(w,E,f),a=new b(o,L);a.position.set(0,E/2,-20/2),a.receiveShadow=!0,a.castShadow=!0,a.userData={wallId:"front"},e.add(a);const s=a.clone();s.position.z=w/2,s.userData={wallId:"back"},e.add(s);const r=new v(f,E,w),i=new b(r,L);i.position.set(-20/2,E/2,0),i.receiveShadow=!0,i.castShadow=!0,i.userData={wallId:"left"},e.add(i);const u=i.clone();u.position.x=w/2,u.userData={wallId:"right"},e.add(u);const B=new J(16777215,.04);e.add(B);const S=new K(16777215,.04);return S.position.set(0,15,0),S.castShadow=!0,S.shadow.mapSize.width=2048,S.shadow.mapSize.height=2048,e.add(S),{group:e,walls:{front:a,back:s,left:i,right:u}}}function de(){g&&(g.group.children.forEach(e=>{e.isMesh&&(e.material=L)}),y.render(h,c))}function R(e,t){const n=document.createElement("div");n.className="wall-text",n.style.width="1000px",n.style.padding="20px",n.style.color="white",n.style.borderRadius="10px",n.style.fontFamily="Arial, sans-serif",n.style.fontSize="25px",n.style.pointerEvents="auto",n.innerHTML=t,setTimeout(()=>{n.querySelectorAll("a").forEach(r=>{r.style.color="#FF0000",r.style.textDecoration="none",r.style.cursor="pointer",r.addEventListener("click",i=>{console.log(`Link clicked: ${r.getAttribute("href")}`),console.log(`Link text: ${r.textContent}`)})})},100);const o=new Z(n);switch(e.userData.wallId){case"front":o.position.set(0,0,.1);break;case"back":o.position.set(0,0,-.1);break;case"left":o.position.set(.1,0,0),o.rotation.y=Math.PI/2;break;case"right":o.position.set(-.1,0,0),o.rotation.y=-Math.PI/2;break}return e.add(o),o}function ce(){A.load("/photos/listenbutton.png",t=>{const n=t.image.width/t.image.height,o=12,a=o/n,s=new C(o,a),r=new z({map:t,transparent:!0,opacity:.5}),i=new b(s,r);i.position.set(-20/2+f/2+.01,E/2-3,0),i.rotation.y=Math.PI/2,h.add(i),console.log("Listen button image added to left wall")},void 0,t=>{console.error("Failed to load listen button texture:",t)})}g=le();h.add(g.group);const H=new ee;H.setDecoderPath("/draco/");const D=new te;D.setDRACOLoader(H);D.load("/models/SEmodels/SE5.glb",e=>{const t=e.scene;t.position.set(8,1.8,-1),t.scale.set(5,5,5),t.rotation.y=Math.PI/2.5,t.traverse(n=>{n.isMesh&&(n.castShadow=!0,n.receiveShadow=!0)}),h.add(t),console.log("SE5.glb model loaded and added to the scene with DRACO compression.")},e=>{console.log(`SE5.glb loading: ${(e.loaded/e.total*100).toFixed(2)}%`)},e=>{console.error("Error loading SE5.glb model:",e)});let d=null;const ue=[];D.load("/models/SEmodels/SE4_2.glb",e=>{d=e.scene,d.scale.set(3.5,3.5,3.5),d.position.set(-4,2.5,-20/2+f+2),d.traverse(t=>{t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0)}),h.add(d),console.log("SE4_2.glb model loaded and placed to the left of SE4 with DRACO compression.")});re("/photos/SEimages/SE5.webp",10,10).then(e=>{e.position.set(0,6,-20/2+f/2+.05),h.add(e),console.log("Image plane added to front wall")}).catch(e=>{console.error("Failed to create image plane:",e)});ie();ce();R(g.walls.right,`
  <p>She's not easily <a href="SE5.html">impressed</a>. But when she sees
  me, there's a twinkle in her eye. I have a charm that the dull suits
  and 'rhiza engineers twice her age, all desperate for her attention,
  completely lack. Surely, with time, she'll start to open up and embrace me.</p>
`);const me=R(g.walls.left,`
  <p>-..<a href="#" id="think-link">THOUGHT</a>-.. ..-</p>
`),I=new Audio("/sound/milesvoicebite2.mp3"),P=me.element.querySelector("#think-link");P&&P.addEventListener("click",e=>{e.preventDefault(),I.currentTime=0,I.play().catch(t=>{console.error("Could not play think audio:",t)})});let x=!1,M=!1,k=0,he=.01;document.addEventListener("keydown",e=>{e.key==="Alt"&&(x=!0)});document.addEventListener("keyup",e=>{e.key==="Alt"&&(x=!1,M=!1)});document.addEventListener("mousedown",e=>{x&&(M=!0,k=e.clientX)});document.addEventListener("mouseup",()=>{M=!1});document.addEventListener("mousemove",e=>{if(M&&x){const t=e.clientX-k;c.rotation.y+=t*he,k=e.clientX}});window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),y.setSize(window.innerWidth,window.innerHeight),p.setSize(window.innerWidth,window.innerHeight)});function W(){requestAnimationFrame(W),d&&(d.rotation.x+=(Math.random()-.5)*.003,d.rotation.y+=(Math.random()-.5)*.003,d.position.x+=(Math.random()-.5)*.005,d.position.y+=(Math.random()-.5)*.005),ue.forEach(e=>{e.rotation.x+=(Math.random()-.5)*.003,e.rotation.y+=(Math.random()-.5)*.003,e.position.x+=(Math.random()-.5)*.005,e.position.y+=(Math.random()-.5)*.005}),y.render(h,c),p.render(h,c)}function pe(){W(),setTimeout(()=>{l.style.opacity="0",setTimeout(()=>{l.style.display="none"},5e3)},5e3)}pe();
