import{S as B,P as X,W as j,o as N,p as q,q as O,m as U,M as z,v as M,G as K,u as $,a as f,A as V,D as J,t as R,r as v,w as I}from"./three.module-8Oc40bl9.js";import{C as Q,a as Y}from"./CSS2DRenderer-C93wpHdk.js";const i=document.createElement("div");i.style.position="fixed";i.style.top="0";i.style.left="0";i.style.width="100%";i.style.height="100%";i.style.backgroundColor="#000";i.style.zIndex="9999";i.style.transition="opacity 1.5s ease-out";document.body.appendChild(i);document.body.appendChild(i);const S={promises:[],addPromise(e){const n=e.catch(o=>(console.warn("Asset loading error:",o),null));return this.promises.push(n),n},allLoaded(){return Promise.all(this.promises)}},P=new B,c=new X(75,window.innerWidth/window.innerHeight,.1,1e3),b=new j({antialias:!0});b.setSize(window.innerWidth,window.innerHeight);b.shadowMap.enabled=!0;document.body.appendChild(b.domElement);const C=new N;c.add(C);const y=new q(C),Z=new O,F=["/sound/SE5.mp3"];function _(){return new Promise((e,n)=>{function o(t){if(t>=F.length){console.warn("Failed to load audio after trying all paths"),n(new Error("Failed to load audio"));return}const a=F[t];console.log(`Attempting to load audio from: ${a}`),Z.load(a,s=>{y.setBuffer(s),y.setLoop(!0),y.setVolume(.2),console.log(`Audio loaded successfully from ${a}`),e(s)},s=>{console.log(`Loading audio ${a}: ${s.loaded/s.total*100}%`)},s=>{console.warn(`Failed to load audio from ${a}:`,s),o(t+1)})}o(0)})}S.addPromise(_());const m=new Q;m.setSize(window.innerWidth,window.innerHeight);m.domElement.style.position="absolute";m.domElement.style.top="0px";m.domElement.style.pointerEvents="none";document.body.appendChild(m.domElement);c.position.set(0,5,0);c.lookAt(0,5,10);const d=20,w=18,L=.5,k=new U,ee=new z({color:139,roughness:.7,metalness:.2});let E=ee;function te(e){return new Promise((n,o)=>{k.load(e,t=>{console.log(`Texture loaded successfully: ${e}`),t.wrapS=M,t.wrapT=M,t.repeat.set(1,1),n(t)},t=>{console.log(`Texture ${e} loading: ${t.loaded/t.total*100}%`)},t=>{console.error(`Error loading texture ${e}:`,t),o(t)})})}const oe=["/photos/SEimages/SEtexture.png"];function ne(){return new Promise(async e=>{for(const n of oe)try{const o=await te(n);E=new z({map:o,roughness:.7,metalness:.2}),console.log(`Successfully loaded texture from path: ${n}`),e(o);return}catch{console.warn(`Failed to load texture from path: ${n}`)}e(null)})}S.addPromise(ne());let u,h;const ae=15,se=10;function ie(){const e=new K,n=new $(d,L,d),o=new f(n,E);o.position.y=-.5/2,o.receiveShadow=!0,e.add(o);const t=new $(d,w,L),a=new f(t,E);a.position.set(0,w/2,-20/2),a.receiveShadow=!0,a.castShadow=!0,a.userData={wallId:"front"},e.add(a);const s=a.clone();s.position.z=d/2,s.userData={wallId:"back"},e.add(s);const r=new $(L,w,d),l=new f(r,E);l.position.set(-20/2,w/2,0),l.receiveShadow=!0,l.castShadow=!0,l.userData={wallId:"left"},e.add(l);const x=l.clone();x.position.x=d/2,x.userData={wallId:"right"},e.add(x);const H=new V(16777215,.03);e.add(H);const p=new J(16777215,.03);return p.position.set(0,15,0),p.castShadow=!0,p.shadow.mapSize.width=2048,p.shadow.mapSize.height=2048,e.add(p),{group:e,walls:{front:a,back:s,left:l,right:x}}}function re(){return new Promise(e=>{const n=["/photos/SEimages/SE8.png"];function o(t){if(t>=n.length){console.warn("Failed to load image after trying all paths"),e(null);return}const a=n[t];console.log(`Attempting to load image from: ${a}`),k.load(a,s=>{console.log(`Image texture loaded successfully from ${a}`),e(s)},s=>{console.log(`Loading ${a}: ${s.loaded/s.total*100}%`)},s=>{console.warn(`Failed to load image texture from ${a}:`,s),o(t+1)})}o(0)})}const le=S.addPromise(re());function de(e){const n=new R(ae,se),o=e?new v({map:e,transparent:!0,opacity:.5,side:I}):new v({color:16733440,side:I});return h=new f(n,o),h.position.set(0,w/3,d/2-.6),h.rotation.y=Math.PI,P.add(h),h}function ce(){return new Promise(e=>{const n=["/photos/endbutton.png"];function o(t){if(t>=n.length){console.warn("Failed to load right wall image after trying all paths"),e(null);return}const a=n[t];console.log(`Trying to load right wall image from: ${a}`),k.load(a,s=>{console.log(`Right wall image loaded from ${a}`),e(s)},void 0,s=>{console.warn(`Failed from ${a}`,s),o(t+1)})}o(0)})}const ue=S.addPromise(ce());function me(e){const n=new R(13,13),o=e?new v({map:e,transparent:!0,opacity:.5,side:I}):new v({color:65535,side:I}),t=new f(n,o);return t.position.set(d/2-L/2-.01,w/2.5,-3),t.rotation.y=-Math.PI/2,P.add(t),t}function g(e,n){const o=document.createElement("div");o.className="wall-text",o.style.width="1000px",o.style.padding="20px",o.style.color="white",o.style.borderRadius="10px",o.style.fontFamily="Arial, sans-serif",o.style.fontSize="25px",o.style.pointerEvents="auto",o.innerHTML=n,setTimeout(()=>{o.querySelectorAll("a").forEach(r=>{r.style.color="#00008B",r.style.textDecoration="none",r.style.cursor="pointer",r.addEventListener("click",l=>{console.log(`Link clicked: ${r.getAttribute("href")}`),console.log(`Link text: ${r.textContent}`)})})},100);const t=new Y(o);switch(e.userData.wallId){case"front":t.position.set(0,0,.1);break;case"back":t.position.set(0,0,-.1);break;case"left":t.position.set(.1,0,0),t.rotation.y=Math.PI/2;break;case"right":t.position.set(-.1,0,0),t.rotation.y=-Math.PI/2;break}return e.add(t),t}let A=!1,T=!1,W=0,we=.01;document.addEventListener("keydown",e=>{e.key==="Alt"&&(A=!0)});document.addEventListener("keyup",e=>{e.key==="Alt"&&(A=!1,T=!1)});document.addEventListener("mousedown",e=>{A&&(T=!0,W=e.clientX)});document.addEventListener("mouseup",()=>{T=!1});document.addEventListener("mousemove",e=>{if(T&&A){const n=e.clientX-W;c.rotation.y+=n*we,W=e.clientX}});window.addEventListener("resize",()=>{c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),b.setSize(window.innerWidth,window.innerHeight),m.setSize(window.innerWidth,window.innerHeight)});function G(){requestAnimationFrame(G),b.render(P,c),m.render(P,c)}async function D(){try{await S.allLoaded(),u=ie(),P.add(u.group);const e=await le;de(e);const n=await ue;me(n),g(u.walls.left,`
          <p>There's this notion that revenge is never worth it. I tend to agree, 
          but only if you've been wronged in a rather mild manner. And clearly I 
          haven't been. I need to go beyond revenge. Revenge is a blow whose pain 
          eventually fades. I want justice. And in these wild times, justice has 
          the taste of spilled <a href="MS1.html">blood</a>.</p>
        `),g(u.walls.right,`
          <p><a href="SEending.html">WAKE UP</a>
          ꟼU ƎꓘAW ꟼU</p>
        `),g(u.walls.right,`
          <p>- .... . -. / - .... . / -.. ..- ... - / 
          .-- .. .-.. .-.. / .-. . - ..- .-. -.</p>
        `),g(u.walls.front,`
          <p>the reeds whispered bittersweet songs</p>
          <p>and secrets that would become too hard to keep</p>
          <p>too hard to keep</P>
          <p>hard to keep</P>
          <p>to keep</P>
        `),g(u.walls.front,`
          <p></p>
          <p></p>
          <p>/P>
          <p>.-.   . - .-. . - </P>
          <p>.-. .   - </P>
        `),G(),y.buffer&&y.play(),setTimeout(()=>{i.style.opacity="0",setTimeout(()=>{i.style.display="none"},5e3)},5e3)}catch(e){console.error("Error initializing scene:",e),i.style.display="none"}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):D();
