import{S as O,P as C,W as N,o as Y,p as F,q as j,m as B,M as R,G as X,u as M,a as S,A as q,D as U,r as L,w as z,t as V,v as P}from"./three.module-8Oc40bl9.js";import{C as _,a as J}from"./CSS2DRenderer-C93wpHdk.js";import{D as K,G as Q}from"./DRACOLoader-LEHEqbdo.js";const x=document.createElement("div");Object.assign(x.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#000",zIndex:"9999",transition:"opacity 1.5s ease-out"});document.body.appendChild(x);const h=new O,d=new C(75,window.innerWidth/window.innerHeight,.1,1e3),w=new N({antialias:!0});w.setSize(window.innerWidth,window.innerHeight);w.shadowMap.enabled=!0;document.body.appendChild(w.domElement);const y=new _;y.setSize(window.innerWidth,window.innerHeight);Object.assign(y.domElement.style,{position:"absolute",top:"0px",pointerEvents:"none"});document.body.appendChild(y.domElement);const v=new Y;d.add(v);const c=new F(v),T=new j;function Z(){const e=["/sound/MS5.mp3"];let t=0;function a(){if(t>=e.length){console.error("Failed to load audio from all paths");return}const o=e[t];console.log(`Trying to load audio from: ${o}`),T.load(o,function(n){c.setBuffer(n),c.setLoop(!0),c.setVolume(.2),c.play(),console.log(`Successfully loaded audio from path: ${o}`)},function(n){console.log("Audio "+n.loaded/n.total*100+"% loaded")},function(n){console.error(`Failed to load audio from path: ${o}`,n),t++,a()})}a()}T.load("/sound/MS5.mp3",function(e){c.setBuffer(e),c.setLoop(!0),c.setVolume(.5),c.play(),console.log("urban noise is playing")},function(e){console.log("Audio "+e.loaded/e.total*100+"% loaded")},function(e){console.error("Error loading audio:",e),Z()});d.position.set(0,5,0);d.lookAt(10,5,0);const u=20,m=18,E=.5,G=new B,ee=new R({color:139,roughness:.7,metalness:.2});let f=ee;const W=[];function oe(e){return new Promise((t,a)=>{G.load(e,o=>{console.log(`Texture loaded successfully: ${e}`),o.wrapS=P,o.wrapT=P,o.repeat.set(1,1),t(o)},void 0,o=>{console.error(`Error loading texture ${e}:`,o),a(o)})})}const te=["/photos/MSimages/MStexture.png"];async function ne(){for(const e of te)try{const t=await oe(e);f=new R({map:t,roughness:.7,metalness:.2}),console.log(`Successfully loaded texture from path: ${e}`),se();break}catch{console.warn(`Failed to load texture from path: ${e}`)}}let g;function ae(){const e=new X,t=new M(u,E,u),a=new S(t,f);a.position.y=-.5/2,a.receiveShadow=!0,e.add(a);const o=new M(u,m,E),n=new S(o,f);n.position.set(0,m/2,-20/2),n.receiveShadow=!0,n.castShadow=!0,n.userData={wallId:"front"},e.add(n);const i=n.clone();i.position.z=u/2,i.userData={wallId:"back"},e.add(i);const r=new M(E,m,u),s=new S(r,f);s.position.set(-20/2,m/2,0),s.receiveShadow=!0,s.castShadow=!0,s.userData={wallId:"left"},e.add(s);const l=s.clone();l.position.x=u/2,l.userData={wallId:"right"},e.add(l);const A=new q(16777215,.06);e.add(A);const p=new U(16777215,.06);return p.position.set(0,15,0),p.castShadow=!0,p.shadow.mapSize.width=2048,p.shadow.mapSize.height=2048,e.add(p),{group:e,walls:{front:n,back:i,left:s,right:l}}}function se(){g&&(g.group.children.forEach(e=>{e.isMesh&&(e.material=f)}),w.render(h,d))}function ie(e,t){const a=document.createElement("div");a.className="wall-text",Object.assign(a.style,{width:"1000px",padding:"20px",color:"white",borderRadius:"10px",fontFamily:"Arial, sans-serif",fontSize:"20px",pointerEvents:"auto"}),a.innerHTML=t,setTimeout(()=>{a.querySelectorAll("a").forEach(l=>{Object.assign(l.style,{color:"#0808fc",textDecoration:"none",cursor:"pointer"}),l.addEventListener("click",A=>{console.log(`Link clicked: ${l.getAttribute("href")}`),console.log(`Link text: ${l.textContent}`)})})},100);const o=new J(a),n=e.userData.wallId,r={front:{x:0,y:0,z:.1,rotY:0},back:{x:0,y:0,z:-.1,rotY:0},left:{x:.1,y:0,z:0,rotY:Math.PI/2},right:{x:-.1,y:0,z:0,rotY:-Math.PI/2}}[n];return o.position.set(r.x,r.y,r.z),r.rotY&&(o.rotation.y=r.rotY),e.add(o),o}const re=8,le=8;function de(){const e="/photos/MSimages/MS5.webp",t=new L({color:43775,side:z}),a=new V(re,le),o=new S(a,t);return o.position.set(u/2-.8,m/2-4,0),o.rotation.y=-Math.PI/2,o.scale.set(1,1,1),h.add(o),G.load(e,n=>{o.material=new L({map:n,transparent:!0,opacity:.5,side:z}),console.log(`Right wall image loaded from ${e}`)},void 0,n=>{console.warn(`Failed to load image from ${e}:`,n)}),o}const $=new K;$.setDecoderPath("/draco/");const D=new Q;D.setDRACOLoader($);function ce(){const e=["/models/MSmodels/MS5.glb","/models/MSmodels/MS5_3.glb","/models/MSmodels/MS5_4.glb"],t=[{x:-6,y:4,z:0},{x:-9,y:2,z:-7.5},{x:-8,y:3,z:5}],a=[{x:4,y:4,z:4},{x:30,y:30,z:30},{x:6,y:6,z:6}],o=[{x:0,y:6.5,z:5},{x:Math.PI/4,y:0,z:0},{x:0,y:0,z:3}];e.forEach((n,i)=>{D.load(n,r=>{const s=r.scene;s.position.set(t[i].x,t[i].y,t[i].z),s.scale.set(a[i].x,a[i].y,a[i].z),s.rotation.set(o[i].x,o[i].y,o[i].z),W.push(s),h.add(s),console.log(`Model loaded from ${n} with DRACO support`),i===0&&(console.log(`MS5.glb positioned at: x=${s.position.x}, y=${s.position.y}, z=${s.position.z}`),console.log(`Wall position: x=${-20/2}, thickness=${E}`))},r=>{console.log(`${n}: ${r.loaded/r.total*100}% loaded`)},r=>{console.error(`Error loading model ${n}:`,r)})})}g=ae();h.add(g.group);ne();const ue=[{wall:"back",content:`<p>the space is filled with the sound of electrified strings stroked
    something is changing twitch▆ corners of a bleached smile tightly 
    collapsed manicu▆ hands an unblinking glassy ga▆ feet shifting in place
    there is that girl that was so cordial but now she stands a little too clo▆
    I ask for her n▆▆ again and she says it's ▆▆▆▆ she makes small talk with 
    me but then I cat▆ him in the corner of my eye he beckons me from the doorway 
    down a long hallway ▆▆ from everyone I go to him and he sh▆ the door quietly</p>`},{wall:"back",content:`<p>.. / .-. . -.-. .- .-.. .-.. / -.-. . .-. - .- .. -. / -- --- -- . -. - ... 
    --..-- / .-.. . - / ..- ... / -.-. .- .-.. .-.. / - .... . -- / .. -.-. . -... 
    . .-. --. ... / .. -. / .--. .- .-. .- -.. .. ... . --..-- / .-- .... . -. / .- 
    ..-. - . .-. / .... .- ...- .. -. --. / .... .- -.. / -- -.-- / ..-. .. .-.. .-.
    . / --- ..-. / .... . .-.</p>`},{wall:"right",content:"<p>YOU WERE SLEEPING WITH A STRANGER ▆▆▆▆▆ERE SLEEPING WITH A STRANGER</p>"},{wall:"right",content:"<p>-.-- --- ..- / .-- . .-. . /-.-- --- ..- / .-- . .-. . /</p>"},{wall:"right",content:`<p>-.-- --- ..- / .-- . .-. . /-.-- --- ..- / .-- . .-. . /</p>
    <p>-.-- --- ..- / .-- . .-. . /-.-- --- ..- / .-- . .-. . / YOU WERE SLEEPING WITH A STRANGER</p>
    <p>YOU WERE SLEEPING ▆▆ A STRANGER</p>
    <p>YOU WERE SLEEPING WITH A STRANGER</p>`},{wall:"left",content:`<p>▆▆▆,</p>
    <p>I know what this loo▆ like. You don't understand yet. But you will. I haven't gone insane
    and I'm certainly not trying to rewrite the ▆▆. I'm writing the future, ▆▆ fut▆e. Don't tell
    me any of that nonse▆▆. It's impossi▆ for me to f▆get you or what we share with each other.
    That guilt you've been shouldering is something I know has caused you nothi▆ but pain and I
    wish to take it away. But I have to ask that you just wa▆ a little bit l▆ger for me. Getting
    close to her has go▆en ▆ in. From here, I can do what I nev▆ could have done when I was nobody
    to ▆▆. Soon, you'll see <a href="MS6.html">what I mean</a>. For now, revert all your a▆ect▆ns back to ▆▆.
    Play your part with ▆▆, just like I am with h▆.</p>
    <p>We will reunite, I promi▆. You know I never ▆ back on my word.</p>
    <p>I love you.</p>
    <p>P▆▆</p>`}];ue.forEach(({wall:e,content:t})=>{ie(g.walls[e],t)});de();ce();let I=!1,b=!1,k=0;const he=.01,we={keydown:e=>{e.key==="Alt"&&(I=!0)},keyup:e=>{e.key==="Alt"&&(I=!1,b=!1)}},pe={mousedown:e=>{I&&(b=!0,k=e.clientX)},mouseup:()=>b=!1,mousemove:e=>{if(b&&I){const t=e.clientX-k;d.rotation.y+=t*he,k=e.clientX}}};Object.entries(we).forEach(([e,t])=>{document.addEventListener(e,t)});Object.entries(pe).forEach(([e,t])=>{document.addEventListener(e,t)});window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight),y.setSize(window.innerWidth,window.innerHeight)});function H(){requestAnimationFrame(H),W.forEach(e=>{e.rotation.x+=(Math.random()-.5)*.003,e.rotation.y+=(Math.random()-.5)*.003,e.position.x+=(Math.random()-.5)*.005,e.position.y+=(Math.random()-.5)*.005}),w.render(h,d),y.render(h,d)}function me(){H(),setTimeout(()=>{x.style.opacity="0",setTimeout(()=>{x.style.display="none"},5e3)},5e3)}me();
