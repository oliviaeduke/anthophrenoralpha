import{S as z,P as W,W as G,o as C,p as H,q as F,m as B,M as L,G as X,u as k,a as E,A as j,D as q,t as N,r as O,w as V,v as D}from"./three.module-8Oc40bl9.js";import{C as J,a as K}from"./CSS2DRenderer-C93wpHdk.js";const r=document.createElement("div");r.style.position="fixed";r.style.top="0";r.style.left="0";r.style.width="100%";r.style.height="100%";r.style.backgroundColor="#000";r.style.zIndex="9999";r.style.transition="opacity 1.5s ease-out";document.body.appendChild(r);const x=new z,d=new W(75,window.innerWidth/window.innerHeight,.1,1e3),g=new G({antialias:!0});g.setSize(window.innerWidth,window.innerHeight);g.shadowMap.enabled=!0;document.body.appendChild(g.domElement);const h=new J;h.setSize(window.innerWidth,window.innerHeight);h.domElement.style.position="absolute";h.domElement.style.top="0px";h.domElement.style.pointerEvents="none";document.body.appendChild(h.domElement);d.position.set(0,5,0);d.lookAt(10,5,0);const R=new C;d.add(R);const u=new H(R),A=new F;A.load("/sound/MS4.mp3",function(e){u.setBuffer(e),u.setLoop(!0),u.setVolume(.5),u.play(),console.log("urban noise is playing")},function(e){console.log("Audio "+e.loaded/e.total*100+"% loaded")},function(e){console.error("Error loading audio:",e),Q()});function Q(){const e=["/sound/MS4.mp3"];let n=0;function o(){if(n>=e.length){console.error("Failed to load audio from all paths");return}const t=e[n];console.log(`Trying to load audio from: ${t}`),A.load(t,function(a){u.setBuffer(a),u.setLoop(!0),u.setVolume(.2),u.play(),console.log(`Successfully loaded audio from path: ${t}`)},function(a){console.log("Audio "+a.loaded/a.total*100+"% loaded")},function(a){console.error(`Failed to load audio from path: ${t}`,a),n++,o()})}o()}const y=20,p=18,b=.5,P=new B,U=new L({color:139,roughness:.7,metalness:.2});let S=U;function Y(e){return new Promise((n,o)=>{P.load(e,t=>{console.log(`Texture loaded successfully: ${e}`),t.wrapS=D,t.wrapT=D,t.repeat.set(1,1),n(t)},t=>{console.log(`Texture ${e} loading: ${t.loaded/t.total*100}%`)},t=>{console.error(`Error loading texture ${e}:`,t),o(t)})})}const Z=["/photos/MSimages/MStexture.png"];async function _(){for(const e of Z)try{const n=await Y(e);S=new L({map:n,roughness:.7,metalness:.2}),console.log(`Successfully loaded texture from path: ${e}`),te();break}catch{console.warn(`Failed to load texture from path: ${e}`)}}let m;function ee(){const e=new X,n=new k(y,b,y),o=new E(n,S);o.position.y=-.5/2,o.receiveShadow=!0,e.add(o);const t=new k(y,p,b),a=new E(t,S);a.position.set(0,p/2,-20/2),a.receiveShadow=!0,a.castShadow=!0,a.userData={wallId:"front"},e.add(a);const w=a.clone();w.position.z=y/2,w.userData={wallId:"back"},e.add(w);const s=new k(b,p,y),l=new E(s,S);l.position.set(-20/2,p/2,0),l.receiveShadow=!0,l.castShadow=!0,l.userData={wallId:"left"},e.add(l);const f=l.clone();f.position.x=y/2,f.userData={wallId:"right"},e.add(f);const i=new j(16777215,.07);e.add(i);const c=new q(16777215,.07);return c.position.set(0,15,0),c.castShadow=!0,c.shadow.mapSize.width=2048,c.shadow.mapSize.height=2048,e.add(c),{group:e,walls:{front:a,back:w,left:l,right:f}}}function te(){m&&(m.group.children.forEach(e=>{e.isMesh&&(e.material=S)}),g.render(x,d))}function $(e,n){const o=document.createElement("div");o.className="wall-text",o.style.width="1000px",o.style.padding="20px",o.style.color="white",o.style.borderRadius="10px",o.style.fontFamily="Arial, sans-serif",o.style.fontSize="20px",o.style.pointerEvents="auto",o.innerHTML=n,setTimeout(()=>{o.querySelectorAll("a").forEach(s=>{s.style.color="#0808fc",s.style.textDecoration="none",s.style.cursor="pointer",s.addEventListener("click",l=>{console.log(`Link clicked: ${s.getAttribute("href")}`),console.log(`Link text: ${s.textContent}`)})})},100);const t=new K(o);switch(e.userData.wallId){case"front":t.position.set(0,0,.1);break;case"back":t.position.set(0,0,-.1);break;case"left":t.position.set(.1,0,0),t.rotation.y=Math.PI/2;break;case"right":t.position.set(-.1,0,0),t.rotation.y=-Math.PI/2;break}return e.add(t),t}function oe(e,n,o=10,t=10){return new Promise((a,w)=>{P.load(n,s=>{const l=new N(o,t),f=new O({map:s,side:V,transparent:!0,opacity:.5}),i=new E(l,f),c=e.userData.wallId;switch(c){case"front":i.position.set(0,p/2,b/2+.05);break;case"back":i.position.set(0,p/2,-.5/2-.05),i.rotation.y=Math.PI;break;case"left":i.position.set(b/2+.05,p/2,0),i.rotation.y=-Math.PI/2;break;case"right":i.position.set(-.5/2-.1,-18/2+6,0),i.rotation.y=-Math.PI/2;break}e.add(i),console.log(`Image added to ${c} wall: ${n}`),a(i)},s=>{console.log(`Image ${n} loading: ${s.loaded/s.total*100}%`)},s=>{console.error(`Error loading image ${n}:`,s),w(s)})})}m=ee();x.add(m.group);_();oe(m.walls.right,"/photos/MSimages/MS4.webp",15,10).then(e=>{console.log("Image plane added successfully to right wall")}).catch(e=>{console.error("Failed to add image plane:",e)});$(m.walls.back,`
<p>I ju▆ want my ▆▆▆ I want my ▆▆▆ I want my ▆▆▆ where is she
it's really happeni▆ red everywhere red red red red red red there's no going back now some▆▆ in the corner of ▆ ▆▆
crack▆ ▆▆ the door it's not just ▆ and h▆ he▆ red I want to <a href="MS5.html">scream</a> to tell that per▆▆ to ▆▆ I'm losing my breath
everything slow▆ I see visions of all that I once was sleeping upon my mother's shoulder haziness of youth
growing pains sl▆▆ red everywhere a brig▆ light shines through my eyelids</p>
`);$(m.walls.back,`
<p>. .-. / .- -. RED RED RED-. .-. / .- -. -. .-. / .- -. -. .-. / .- -. -. .-.  -. -. -. -. -. -. -. -. -. -./ .- -.</p>
<p>/ .- -. -. .-. / .- -. -. .-. / .- -                             / .- -./ .- -./ .- -./ .- -./ .- -. -. .-. -. .-. -. .-.</p>
<P> RED RED RED RED RED RED RED RED </p>
`);let I=!1,M=!1,v=0,ne=.01;document.addEventListener("keydown",e=>{e.key==="Alt"&&(I=!0)});document.addEventListener("keyup",e=>{e.key==="Alt"&&(I=!1,M=!1)});document.addEventListener("mousedown",e=>{I&&(M=!0,v=e.clientX)});document.addEventListener("mouseup",()=>{M=!1});document.addEventListener("mousemove",e=>{if(M&&I){const n=e.clientX-v;d.rotation.y+=n*ne,v=e.clientX}});window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight),h.setSize(window.innerWidth,window.innerHeight)});function T(){requestAnimationFrame(T),g.render(x,d),h.render(x,d)}function ae(){T(),setTimeout(()=>{r.style.opacity="0",setTimeout(()=>{r.style.display="none"},5e3)},5e3)}ae();
