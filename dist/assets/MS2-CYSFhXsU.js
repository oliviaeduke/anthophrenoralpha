import{S as B,P as X,o as j,p as q,q as O,W as N,m as U,M as z,G as V,u as E,a as g,A as J,D as K,t as G,r as H,v as T,w as Q}from"./three.module-8Oc40bl9.js";import{C as Y,a as Z}from"./CSS2DRenderer-C93wpHdk.js";const s=document.createElement("div");s.style.position="fixed";s.style.top="0";s.style.left="0";s.style.width="100%";s.style.height="100%";s.style.backgroundColor="#000";s.style.zIndex="9999";s.style.transition="opacity 1.5s ease-out";document.body.appendChild(s);const p=new B,d=new X(75,window.innerWidth/window.innerHeight,.1,1e3),W=new j;d.add(W);const k=new q(W),_=new O;_.load("/sound/MS2.mp3",function(e){k.setBuffer(e),k.setLoop(!0),k.setVolume(.5),k.play()});const w=new N({antialias:!0});w.setSize(window.innerWidth,window.innerHeight);w.shadowMap.enabled=!0;document.body.appendChild(w.domElement);const m=new Y;m.setSize(window.innerWidth,window.innerHeight);m.domElement.style.position="absolute";m.domElement.style.top="0px";m.domElement.style.pointerEvents="none";document.body.appendChild(m.domElement);d.position.set(0,5,0);d.lookAt(0,5,10);const c=20,h=18,y=.5,v=new U,ee=new z({color:139,roughness:.7,metalness:.2});let b=ee;function te(e){return new Promise((t,o)=>{v.load(e,n=>{console.log(`Texture loaded successfully: ${e}`),n.wrapS=T,n.wrapT=T,n.repeat.set(1,1),t(n)},n=>{console.log(`Texture ${e} loading: ${n.loaded/n.total*100}%`)},n=>{console.error(`Error loading texture ${e}:`,n),o(n)})})}const oe=["/photos/MSimages/MStexture.png"];async function ne(){for(const e of oe)try{const t=await te(e);b=new z({map:t,roughness:.7,metalness:.2}),console.log(`Successfully loaded texture from path: ${e}`),ie();break}catch{console.warn(`Failed to load texture from path: ${e}`)}}let u;function ae(){const e=new V,t=new E(c,y,c),o=new g(t,b);o.position.y=-.5/2,o.receiveShadow=!0,e.add(o);const n=new E(c,h,y),a=new g(n,b);a.position.set(0,h/2,-20/2),a.receiveShadow=!0,a.castShadow=!0,a.userData={wallId:"front"},e.add(a);const r=a.clone();r.position.z=c/2,r.userData={wallId:"back"},e.add(r);const l=new E(y,h,c),i=new g(l,b);i.position.set(-20/2,h/2,0),i.receiveShadow=!0,i.castShadow=!0,i.userData={wallId:"left"},e.add(i);const S=i.clone();S.position.x=c/2,S.userData={wallId:"right"},e.add(S);const F=new J(16777215,.09);e.add(F);const f=new K(16777215,.09);return f.position.set(0,15,0),f.castShadow=!0,f.shadow.mapSize.width=2048,f.shadow.mapSize.height=2048,e.add(f),{group:e,walls:{front:a,back:r,left:i,right:S}}}function ie(){u&&(u.group.children.forEach(e=>{e.isMesh&&(e.material=b)}),w.render(p,d))}let M=null;function se(){v.load("/photos/MSimages/MS2.webp",t=>{$(t)},t=>{console.log(`Image loading: ${t.loaded/t.total*100}%`)},t=>{console.error("Error loading image:",t),C(["/photos/MSimages/MS2.png"],0)})}function $(e){const t=e.image.width/e.image.height,o=c*.6,n=o/t,a=new G(o,n),r=new H({map:e,side:Q,transparent:!0,opacity:.5});M=new g(a,r),M.position.set(0,h/2-3,c/2-y/2-.5),M.rotation.y=Math.PI,p.add(M),console.log("Image plane added successfully to the back wall")}function C(e,t){if(t>=e.length){console.error("Failed to load image from all paths");return}v.load(e[t],o=>{$(o)},o=>{console.log(`Alternative image loading: ${o.loaded/o.total*100}%`)},o=>{console.error(`Error loading alternative image path ${e[t]}:`,o),C(e,t+1)})}function le(){v.load("/photos/listenbutton.png",t=>{const o=t.image.width/t.image.height,n=12,a=n/o,r=new G(n,a),l=new H({map:t,transparent:!0,opacity:.5}),i=new g(r,l);i.position.set(-20/2+y/2+.01,h/2-3,0),i.rotation.y=Math.PI/2,p.add(i)},void 0,t=>{console.error("Failed to load listen button texture:",t)})}function I(e,t){const o=document.createElement("div");o.className="wall-text",o.style.width="1000px",o.style.padding="20px",o.style.color="white",o.style.borderRadius="10px",o.style.fontFamily="Arial, sans-serif",o.style.fontSize="18px",o.style.pointerEvents="auto",o.innerHTML=t,setTimeout(()=>{o.querySelectorAll("a").forEach(l=>{l.style.color="#0808fc",l.style.textDecoration="none",l.style.cursor="pointer",l.addEventListener("click",i=>{console.log(`Link clicked: ${l.getAttribute("href")}`),console.log(`Link text: ${l.textContent}`)})})},100);const n=new Z(o);switch(e.userData.wallId){case"front":n.position.set(0,0,.1);break;case"back":n.position.set(0,0,-.1);break;case"left":n.position.set(.1,0,0),n.rotation.y=Math.PI/2;break;case"right":n.position.set(-.1,0,0),n.rotation.y=-Math.PI/2;break}return e.add(n),n}u=ae();p.add(u.group);ne();se();le();I(u.walls.right,`
<p>He planned this breathtaking party. There's an endless pour of New Californian wine. 
Gilded trays glide by like little ships, carrying hors d'oeuvres. A couple of his friends, 
electric violinists from the Neomodern Orchestra, play hauntingly beautiful renditions of 
songs I only half-recognize, but feel like they're meant just for this special moment. I 
pull out the compact he gave me and touch up my lipstick. My stomach flutters. Maybe it's 
the wine. Maybe it's the way he looks at me. Maybe it's just the novelty of <a href="MS3.html">being seen</a>, 
actually seen, without dollar signs in anyone's eyes. For once, I feel like I belong.</p>
`);I(u.walls.right,`
<p>..-..-..-..-..-..--..-..-..-..-..</p>
<p>..-..-..-..-..-..--..-..-..-..-..-..-..-..--..-..-..-..-..-..-..-..--..-..-..-..-..-..-..-..--..-..-..-..-..</p>
`);const re=I(u.walls.left,`
  <p>-..<a href="#" id="think-link">THOUGHT</a>-.. ..-</p>
`),A=new Audio("/sound/milesvoicebite1.mp3"),D=re.element.querySelector("#think-link");D&&D.addEventListener("click",e=>{e.preventDefault(),A.currentTime=0,A.play().catch(t=>{console.error("Could not play sound:",t)})});let L=!1,x=!1,P=0,de=.01;document.addEventListener("keydown",e=>{e.key==="Alt"&&(L=!0)});document.addEventListener("keyup",e=>{e.key==="Alt"&&(L=!1,x=!1)});document.addEventListener("mousedown",e=>{L&&(x=!0,P=e.clientX)});document.addEventListener("mouseup",()=>{x=!1});document.addEventListener("mousemove",e=>{if(x&&L){const t=e.clientX-P;d.rotation.y+=t*de,P=e.clientX}});window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight),m.setSize(window.innerWidth,window.innerHeight)});function R(){requestAnimationFrame(R),w.render(p,d),m.render(p,d)}function ce(){R(),setTimeout(()=>{s.style.opacity="0",setTimeout(()=>{s.style.display="none"},5e3)},5e3)}ce();
